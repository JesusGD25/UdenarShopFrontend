<div class="my-orders-container">
  <div class="page-header">
    <h1>ðŸ“¦ Mis Ã“rdenes</h1>
    <p>Historial de todas tus compras</p>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="spinner"></div>
    <p>Cargando Ã³rdenes...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="errorMessage && !isLoading" class="error-state">
    <lucide-icon [img]="XCircle" [size]="48"></lucide-icon>
    <p>{{ errorMessage }}</p>
    <button class="btn-retry" (click)="loadOrders()">Reintentar</button>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && !errorMessage && orders.length === 0" class="empty-state">
    <lucide-icon [img]="Package" [size]="64"></lucide-icon>
    <h3>No tienes Ã³rdenes aÃºn</h3>
    <p>Explora productos y realiza tu primera compra</p>
    <a routerLink="/dashboard/explore" class="btn-explore">Explorar Productos</a>
  </div>

  <!-- Orders List -->
  <div *ngIf="!isLoading && !errorMessage && orders.length > 0" class="orders-list">
    <div *ngFor="let order of orders" class="order-card">
      <!-- Order Header -->
      <div class="order-header">
        <div class="order-info">
          <h3>{{ order.orderNumber }}</h3>
          <span class="order-date">{{ formatDate(order.createdAt) }}</span>
        </div>
        <div class="order-status" [ngClass]="getStatusClass(order.status)">
          <lucide-icon [img]="getStatusIcon(order.status)" [size]="20"></lucide-icon>
          <span>{{ getStatusText(order.status) }}</span>
        </div>
      </div>

      <!-- Order Items -->
      <div class="order-items">
        <div *ngFor="let item of order.items" class="order-item">
          <div class="item-info">
            <span class="item-title">{{ item.productTitle }}</span>
            <span class="item-quantity">x{{ item.quantity }}</span>
          </div>
          <span class="item-price">${{ item.price * item.quantity | number:'1.0-0' }}</span>
        </div>
      </div>

      <!-- Order Footer -->
      <div class="order-footer">
        <div class="order-details">
          <div class="detail-item">
            <span class="label">Total:</span>
            <span class="value total-amount">${{ order.totalAmount | number:'1.0-0' }}</span>
          </div>
          <div class="detail-item">
            <span class="label">Items:</span>
            <span class="value">{{ getTotalItems(order) }}</span>
          </div>
          <div class="detail-item">
            <span class="label">MÃ©todo de pago:</span>
            <span class="value">{{ order.paymentMethod }}</span>
          </div>
        </div>
        
        <div class="order-actions">
          <button 
            *ngIf="canCancelOrder(order)"
            class="btn-cancel-order"
            (click)="cancelOrder(order.id)"
          >
            Cancelar Orden
          </button>
        </div>
      </div>

      <!-- Shipping Address -->
      <div class="shipping-info" *ngIf="order.shippingAddress">
        <lucide-icon [img]="Truck" [size]="16"></lucide-icon>
        <span>{{ order.shippingAddress }}</span>
      </div>

      <!-- Notes -->
      <div class="order-notes" *ngIf="order.notes">
        <strong>Notas:</strong> {{ order.notes }}
      </div>
    </div>
  </div>
</div>
