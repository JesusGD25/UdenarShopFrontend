<div class="my-orders-container">
  <div class="page-header">
    <h1>üì¶ Mis √ìrdenes</h1>
    <p>Historial de todas tus compras</p>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="spinner"></div>
    <p>Cargando √≥rdenes...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="errorMessage && !isLoading" class="error-state">
    <span class="error-icon">‚ùå</span>
    <p>{{ errorMessage }}</p>
    <button class="btn-retry" (click)="loadOrders()">Reintentar</button>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && !errorMessage && orders.length === 0" class="empty-state">
    <span class="empty-icon">üì¶</span>
    <h3>No tienes √≥rdenes a√∫n</h3>
    <p>Explora productos y realiza tu primera compra</p>
    <a routerLink="/dashboard/explore" class="btn-explore">Explorar Productos</a>
  </div>

  <!-- Orders List -->
  <div *ngIf="!isLoading && !errorMessage && orders.length > 0" class="orders-list">
    <div *ngFor="let order of orders" class="order-card">
      <!-- Order Header -->
      <div class="order-header">
        <div class="order-info">
          <h3>Orden {{ order.id }}</h3>
          <span class="order-date">{{ formatDate(order.createdAt) }}</span>
        </div>
        <div class="order-status" [style.color]="getStatusColor(order.status)">
          <span class="status-icon">{{ getStatusIcon(order.status) }}</span>
          <span>{{ getStatusText(order.status) }}</span>
        </div>
      </div>

      <!-- Order Items -->
      <div class="order-items">
        <h4 class="items-title">Productos</h4>
        <div *ngFor="let item of order.items" class="order-item">
          <div class="item-info">
            <span class="item-title">{{ item.product.title }}</span>
            <span class="item-details">
              <span class="item-quantity">Cantidad: {{ item.quantity }}</span>
              <span class="item-unit-price">Precio unitario: ${{ item.price | number:'1.0-0' }}</span>
            </span>
          </div>
          <span class="item-total-price">${{ (item.price * item.quantity) | number:'1.0-0' }}</span>
        </div>
      </div>

      <!-- Order Footer -->
      <div class="order-footer">
        <div class="order-details">
          <div class="detail-item">
            <span class="label">Total de la Orden:</span>
            <span class="value total-amount">${{ order.totalAmount | number:'1.0-0' }}</span>
          </div>
          <div class="detail-item">
            <span class="label">Total de Items:</span>
            <span class="value">{{ getTotalItems(order) }}</span>
          </div>
          <div class="detail-item">
            <span class="label">M√©todo de Pago:</span>
            <span class="value">{{ getPaymentMethodText(order.paymentMethod) }}</span>
          </div>
        </div>
        
        <div class="order-actions">
          <button 
            *ngIf="canCancelOrder(order)"
            class="btn-cancel-order"
            (click)="cancelOrder(order.id)"
          >
            Cancelar Orden
          </button>
        </div>
      </div>

      <!-- Shipping Address -->
      <div class="shipping-info">
        <span class="shipping-icon">üöö</span>
        <div class="shipping-details">
          <strong>Direcci√≥n de Env√≠o:</strong>
          <span>{{ getShippingAddressText(order.shippingAddress) }}</span>
        </div>
      </div>

      <!-- Notes -->
      <div class="order-notes" *ngIf="order.notes">
        <strong>Notas:</strong> {{ order.notes }}
      </div>
    </div>
  </div>
</div>
